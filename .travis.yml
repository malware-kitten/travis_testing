os:
- linux
sudo:
- false
language: python
python:
  - "3.5"
before_script:
- git clone https://github.com/radare/radare2 && cd radare2
- "./configure --prefix=`pwd`/install > /dev/null"
- make -s -j2 > /dev/null
- make install > /dev/null
- export PATH=${TRAVIS_BUILD_DIR}/radare2/install/bin:${PATH}
- export LD_LIBRARY_PATH=${TRAVIS_BUILD_DIR}/radare2/install/lib:${LD_LIBRARY_PATH}
- export LIBR_INCLUDE=${TRAVIS_BUILD_DIR}/radare2/libr/include
- export LIBR_UTIL=${TRAVIS_BUILD_DIR}/radare2/libr/util
- export PKG_CONFIG_PATH=${TRAVIS_BUILD_DIR}/radare2/pkgcfg
- cd ..
- pip install r2pipe
- pip install pathlib
- pip install simplejson 
- wget "https://github.com/dotnetinstaller/dotnetinstaller/blob/master/ThirdParty/Microsoft/Visual%20Studio%208/VC/lib/opends60.lib?raw=true" -O opends60.lib
addons:
  apt:
    update: true
    packages:
        - p7zip-full

script:
- python zig_from_lib.py -f opends60.lib -o opends60.lib.zig -vvv
- echo "Complete!"

deploy:
  skip_cleanup: true
  provider: releases
  file: msvcrt.lib
repo: securitykitten/travis_testing
