os:
- linux
language: python
python:
  - "3.5"
before_script:
- wget http://ftp.us.debian.org/debian/pool/main/p/p7zip/p7zip_16.02+dfsg-6_amd64.deb -O 7z.deb
- wget http://ftp.us.debian.org/debian/pool/main/p/p7zip/p7zip-full_16.02+dfsg-6_amd64.deb -O 7z_full.deb
- sudo apt install ./7z.deb
- sudo apt install ./7z_full.deb
- git clone https://github.com/radare/radare2 && cd radare2
- "./configure --prefix=`pwd`/install > /dev/null"
- make -s -j2 > /dev/null
- make install > /dev/null
- export PATH=${TRAVIS_BUILD_DIR}/radare2/install/bin:${PATH}
- export LD_LIBRARY_PATH=${TRAVIS_BUILD_DIR}/radare2/install/lib:${LD_LIBRARY_PATH}
- export LIBR_INCLUDE=${TRAVIS_BUILD_DIR}/radare2/libr/include
- export LIBR_UTIL=${TRAVIS_BUILD_DIR}/radare2/libr/util
- export PKG_CONFIG_PATH=${TRAVIS_BUILD_DIR}/radare2/pkgcfg
- cd ..
- pip install r2pipe
- pip install pathlib
- pip install simplejson 

script:
- wget "https://github.com/dotnetinstaller/dotnetinstaller/blob/master/ThirdParty/Microsoft/Visual%20Studio%208/VC/lib/msvcrt.lib?raw=true" -O ./msvcrt.lib
- python zig_from_lib.py -f ./msvcrt.lib -o ./msvcrt.zig -vvv 2>&1
