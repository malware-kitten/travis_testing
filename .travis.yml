os:
- linux
language: python
sudo: required
python:
  - "3.5"
before_script:
- wget "https://sourceforge.net/projects/p7zip/files/p7zip/16.02/p7zip_16.02_x86_linux_bin.tar.bz2/download?use_mirror=iweb&r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fp7zip%2Ffiles%2Fp7zip%2F16.02%2F&use_mirror=iweb" -O p7zip.tar.bz2
- tar xvjf p7zip.tar.bz2 && cd p7zip_16.02
- sudo ./install.sh
- cd ..
- git clone https://github.com/radare/radare2 && cd radare2
- "./configure --prefix=`pwd`/install > /dev/null"
- make -s -j2 > /dev/null
- make install > /dev/null
- export PATH=${TRAVIS_BUILD_DIR}/radare2/install/bin:${PATH}
- export LD_LIBRARY_PATH=${TRAVIS_BUILD_DIR}/radare2/install/lib:${LD_LIBRARY_PATH}
- export LIBR_INCLUDE=${TRAVIS_BUILD_DIR}/radare2/libr/include
- export LIBR_UTIL=${TRAVIS_BUILD_DIR}/radare2/libr/util
- export PKG_CONFIG_PATH=${TRAVIS_BUILD_DIR}/radare2/pkgcfg
- cd ..
- pip install r2pipe
- pip install pathlib
- pip install simplejson 

script:
- wget "https://github.com/dotnetinstaller/dotnetinstaller/blob/master/ThirdParty/Microsoft/Visual%20Studio%208/VC/lib/msvcrt.lib?raw=true" -O ./msvcrt.lib
- python3 zig_from_lib.py -f ./msvcrt.lib -o ./msvcrt.zig -vvv 2>&1
